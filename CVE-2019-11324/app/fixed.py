import urllib3
import ssl

#create an SSL connection pool with the self-signed certificate
sslcontext = ssl.create_default_context(cafile="selfsigned.pem")
sslcontext.verify_mode = ssl.CERT_REQUIRED

#Create an HTTP connection pool with the custom SSL context
http_connection = urllib3.PoolManager(ssl_context=sslcontext)

#Target a server with a self-signed certificate
url_ = "https://flask-server/"


try:
     print(f"Attempting to connect to {url_}")
     http_response = http_connection.request("GET", url_)
     print(f"Connection succeeded: {http_response.status}")
except urllib3.exceptions.SSLError as e:
     print(f"SSL verification failed as expected: {e}")
